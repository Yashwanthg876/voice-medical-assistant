{% extends "base.html" %}
{% block content %}

<div class="card">
    <h2 class="title">Dashboard</h2>
    <p class="subtitle">
        Welcome back. Here is an overview of your medical AI activity.
    </p>
</div>

<!-- KPI CARDS -->
<div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:20px; margin-bottom:30px;">

    <div class="card">
        <h3>üéô Voice Queries</h3>
        <p style="font-size:32px; font-weight:700; margin-top:10px;">
            {{ voice_count or 0 }}
        </p>
        <p class="subtitle">Total voice interactions</p>
    </div>

    <div class="card">
        <h3>üí¨ Chatbot Queries</h3>
        <p style="font-size:32px; font-weight:700; margin-top:10px;">
            {{ chat_count or 0 }}
        </p>
        <p class="subtitle">Total chat conversations</p>
    </div>

    <div class="card">
        <h3>üéØ Last Detected Intent</h3>
        <p style="font-size:20px; font-weight:600; margin-top:14px;">
            {{ last_intent or "‚Äî" }}
        </p>
        <p class="subtitle">Most recent diagnosis intent</p>
    </div>

    <div class="card">
        <h3>‚ö†Ô∏è Risk Indicator</h3>
        <p style="font-size:20px; font-weight:600; margin-top:14px; color:#dc2626;">
            Informational Only
        </p>
        <p class="subtitle">Not a medical diagnosis</p>
    </div>

</div>

<!-- RECENT ACTIVITY -->
<div class="card">
    <h3 class="title" style="font-size:22px;">Recent Activity</h3>
    <p class="subtitle">Latest voice and chatbot interactions</p>

    <table style="width:100%; border-collapse:collapse; margin-top:20px;">
        <thead>
            <tr style="text-align:left; color:#64748b; font-size:14px;">
                <th style="padding-bottom:10px;">Type</th>
                <th style="padding-bottom:10px;">Input</th>
                <th style="padding-bottom:10px;">Result</th>
                <th style="padding-bottom:10px;">Time</th>
            </tr>
        </thead>
        <tbody>
            {% for row in recent_activity %}
            <tr style="border-top:1px solid #e2e8f0;">
                <td style="padding:14px 0;">{{ row.type }}</td>
                <td>{{ row.input }}</td>
                <td>{{ row.result }}</td>
                <td>{{ row.time }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" style="padding:20px; color:#64748b;">
                    No activity yet.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- QUICK ACTIONS -->
<div class="card">
    <h3 class="title" style="font-size:22px;">Quick Actions</h3>

    <div style="margin-top:20px;">
        <a href="/assistant">
            <button class="btn btn-primary">üéô Start Voice Assistant</button>
        </a>

        <a href="/chatbot" style="margin-left:15px;">
            <button class="btn btn-primary">üí¨ Open Medical Chatbot</button>
        </a>
    </div>
</div>

{% endblock %}